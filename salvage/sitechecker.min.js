var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};
$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,d=0;d<e;d++){var f=a[d];if(c.call(b,f,d,a))return{i:d,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var f=c[b];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
var startProcessSites=function(a){a.preventDefault();(new SiteFinder(scanTextarea.value,bookmarksTextarea.value)).find()},SiteFinder=function(a,c){this.o_salvage=document.getElementById("output-salvage");this.o_anomaly=document.getElementById("output-anomaly");this.normalizer=new DataNormalizer;this.printer=new Printer;this.raw_scan=a;this.raw_bookmarks=c};
SiteFinder.prototype.find=function(){var a=$jscomp.makeIterator(this.normalizer.scan(this.raw_scan)),c=a.next().value;a=a.next().value;var b=$jscomp.makeIterator(this.normalizer.bookmark(this.raw_bookmarks)),e=b.next().value;b=b.next().value;this.printer.print(this.o_anomaly,this.finder(a,e));this.printer.print(this.o_salvage,this.finder(b,c))};SiteFinder.prototype.finder=function(a,c){for(var b=[],e=0;e<a.length;e++){var d=a[e];!1===c.includes(d.id)&&b.push(d)}return b};var Printer=function(){};
Printer.prototype.print=function(a,c){a.innerHTML="";if(0!==c.length)for(var b=0;b<c.length;b++){var e=a.insertRow(0),d=e.insertCell(0),f=e.insertCell(1);e=e.insertCell(2);d.innerHTML=c[b].id;e.innerHTML=c[b].name;f.innerHTML=void 0===c[b].timestamp?"":c[b].timestamp}};var DataNormalizer=function(){};
DataNormalizer.prototype.scan=function(a){a=a.split("\n");for(var c=[],b=[],e=0;e<a.length;e++){var d=a[e],f=d.substring(0,7);d="Ore Site"===d.substring(23,31)?d.substr(23):d.substr(35);d=d.split("100,0%")[0].slice(0,-1);c.push(f);b.push(new Anomaly(f,d))}return[c,b]};
DataNormalizer.prototype.bookmark=function(a){a=a.split("\n");for(var c=(new Date).getFullYear().toString(),b=[],e=[],d=0;d<a.length;d++){var f=a[d],g=f.substr(0,7),h=f.substr(8).split("Coordinate")[0].slice(0,-1);f=f.substr(f.indexOf(c)).substr(0,16);b.push(g);e.push(new Bookmark(g,h,f))}return[b,e]};var Anomaly=function(a,c){this.id=a;this.name=c},Bookmark=function(a,c,b){this.id=a;this.name=c;this.timestamp=b},siteForm=document.getElementById("siteForm");siteForm.addEventListener("submit",startProcessSites);
var scanTextarea=document.getElementById("scan-textarea"),bookmarksTextarea=document.getElementById("bookmarks-textarea");
